#!/usr/bin/env bash

# Install Nginx if not already installed
apt-get update
apt-get install -y nginx

# Define the configuration file path
nginx_conf="/etc/nginx/sites-available/default"

# Define the redirection URL
redirect_url="https://www.youtube.com/watch?v=QH2-TGUlwu4"

# Generate the sed command to replace the default server block with redirection
sed_command="\\
/server {\\
    listen 80 default_server;\\
    listen [::]:80 default_server;\\
\\
    server_name _;\\
\\
    location /redirect_me {\\
        return 301 $redirect_url;\\
    }\\
}\\
"

# Apply the sed command to modify the Nginx configuration
sed -i "/^server {/,$ d" "$nginx_conf"
echo "$sed_command" >> "$nginx_conf"

# Restart Nginx to apply changes
service nginx restart

