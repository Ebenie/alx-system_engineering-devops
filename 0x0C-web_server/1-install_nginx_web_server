#!/usr/bin/env bash
# Install nginx and modify Nginx configuration to listen on port 80

apt-get update
apt-get install -y nginx

# Check if nginx is running
if ! pgrep nginx >/dev/null; then
    echo "Nginx is not running. Exiting."
    exit 1
fi

# Check if nginx is listening on port 80
if ! nc -z localhost 80; then
    echo "Nginx is not listening on port 80. Exiting."
    exit 1
fi


echo "Hello World!" > /var/www/html/index.html


if ! curl -s localhost | grep -q "Hello World!"; then
    echo "Nginx is not serving the expected content. Exiting."
    exit 1
fi


echo "Nginx installation and configuration completed successfully."

